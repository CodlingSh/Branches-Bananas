#ifndef BANANA_H
#define BANANA_H

#include <Arduboy2.h>

// SPRITES
const uint8_t PROGMEM banana[] = {
16, 12,
0x3f, 0xc1, 0x01, 0x06, 0x08, 0x10, 0x20, 0x20, 0x40, 0x40, 0x40, 0x40, 0x80, 0x80, 0xc0, 0xc0, 
0x00, 0x00, 0x01, 0x02, 0x04, 0x04, 0x08, 0x08, 0x08, 0x08, 0x08, 0x04, 0x02, 0x01, 0x00, 0x00, 
};

const uint8_t PROGMEM test[] = {
16, 16,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
};

const unsigned char PROGMEM banana_mask[] =
{
// width, height,
16, 12,
// FRAME 00
0x3f, 0xff, 0xff, 0xfe, 0xf8, 0xf0, 0xe0, 0xe0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0xc0, 0xc0, 
0x00, 0x00, 0x01, 0x03, 0x07, 0x07, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x07, 0x03, 0x01, 0x00, 0x00,
};

class Banana {
  private:
    int _x = 700;
    int _y = 0;
    int _gravity = 2;
    bool falling = false;

  public:

    int getX() {
      return _x;
    }

    int getY() {
      return _y;
    }

    void spawn() {
      _x = 140 + random(120);
      _y = 6 + random(36);
      _gravity = 2;
      _gravity += random(2);
    }

    void update() {
      _x -= _gravity;

      if (_y <= 0) {
        _y = 6 + random(36);
      }

      if (_x < -60) {
        spawn();   
      }
    }

    void draw() {
      //Sprites::drawOverwrite(10, 5, test, 0);
      //Sprites::drawExternalMask(10, 5, banana, banana_mask, 0, 0);
      Sprites::drawOverwrite(_x, _y, banana, 0);
    }
};

#endif
#ifndef BANANA_H
#define BANANA_H

#include <Arduboy2.h>

// SPRITES
const uint8_t PROGMEM banana_spr[] = {
16, 12,
0x3f, 0xc1, 0x01, 0x06, 0x08, 0x10, 0x20, 0x20, 0x40, 0x40, 0x40, 0x40, 0x80, 0x80, 0xc0, 0xc0, 
0x00, 0x00, 0x01, 0x02, 0x04, 0x04, 0x08, 0x08, 0x08, 0x08, 0x08, 0x04, 0x02, 0x01, 0x00, 0x00, 
};

const unsigned char PROGMEM banana_mask[] =
{
0x3f, 0xff, 0xff, 0xfe, 0xf8, 0xf0, 0xe0, 0xe0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0xc0, 0xc0, 
0x00, 0x00, 0x01, 0x03, 0x07, 0x07, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x07, 0x03, 0x01, 0x00, 0x00,
};

class Banana {
  private:
    int _x = 500;
    int _y = 0;
    bool falling = false;
    float _acceleration = 0.04;
    float _velocity = 0;


  public:

    int getX() {
      return _x;
    }

    int getY() {
      return _y;
    }

    void spawn() {
      _x = 160 + random(60);
      _y = 6 + random(36);
      _acceleration = 0.04;
      _velocity = 0;
    }

    void update() {
      _velocity += _acceleration;
      _x -= _velocity;

      if (_y <= 0) {
        _y = 6 + random(36);
      }

      if (_x < -60) {
        spawn();   
      }
    }

    void draw() {
      Sprites::drawExternalMask(_x, _y, banana_spr, banana_mask, 0, 0);
    }
};

#endif